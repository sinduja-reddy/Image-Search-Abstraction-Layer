{
  "{\"filename\":\"/app/src/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "mongoose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mongoose"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "path"
              }
            ]
          },
          {
            "source": "./api/search",
            "imported": [
              "searchApi"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "searchApi",
                "local": "searchApi"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "app"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "app",
              "exported": "app"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/app.js",
      "filenameRelative": "/app/src/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.app = undefined;\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _mongoose = require('mongoose');\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _search = require('./api/search');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mongodb = process.env.MLAB_URI;\n\nmongooseInit(mongodb);\n\nvar app = exports.app = (0, _express2.default)(); // Create express app\n\n\n/* Mongoose initialization function */\nfunction mongooseInit(mongodb) {\n  _mongoose2.default.Promise = global.Promise;\n  _mongoose2.default.connect(mongodb);\n}\napp.use(_express2.default.static('public'));\napp.get('/', function (req, res) {\n  res.sendFile(_path2.default.join(__dirname, '../views', 'index.html'));\n});\napp.use('/api', _search.searchApi);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJtb25nb2RiIiwicHJvY2VzcyIsImVudiIsIk1MQUJfVVJJIiwibW9uZ29vc2VJbml0IiwiYXBwIiwiUHJvbWlzZSIsImdsb2JhbCIsImNvbm5lY3QiLCJ1c2UiLCJzdGF0aWMiLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kRmlsZSIsImpvaW4iLCJfX2Rpcm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUVBLElBQU1BLFVBQVVDLFFBQVFDLEdBQVIsQ0FBWUMsUUFBNUI7O0FBRUFDLGFBQWFKLE9BQWI7O0FBRU8sSUFBTUssb0JBQU0sd0JBQVosQyxDQUF1Qjs7O0FBRzlCO0FBQ0EsU0FBU0QsWUFBVCxDQUFzQkosT0FBdEIsRUFBK0I7QUFDN0IscUJBQVNNLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCO0FBQ0EscUJBQVNFLE9BQVQsQ0FBaUJSLE9BQWpCO0FBQ0Q7QUFDREssSUFBSUksR0FBSixDQUFRLGtCQUFRQyxNQUFSLENBQWUsUUFBZixDQUFSO0FBQ0FMLElBQUlNLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDekJBLE1BQUlDLFFBQUosQ0FBYyxlQUFLQyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsVUFBckIsRUFBZ0MsWUFBaEMsQ0FBZDtBQUNELENBRkQ7QUFHQVgsSUFBSUksR0FBSixDQUFRLE1BQVIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7IHNlYXJjaEFwaSB9IGZyb20gJy4vYXBpL3NlYXJjaCdcbiBcbmNvbnN0IG1vbmdvZGIgPSBwcm9jZXNzLmVudi5NTEFCX1VSSTtcblxubW9uZ29vc2VJbml0KG1vbmdvZGIpOyBcbiBcbmV4cG9ydCBjb25zdCBhcHAgPSBleHByZXNzKCk7IC8vIENyZWF0ZSBleHByZXNzIGFwcFxuIFxuIFxuLyogTW9uZ29vc2UgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gKi9cbmZ1bmN0aW9uIG1vbmdvb3NlSW5pdChtb25nb2RiKSB7XG4gIG1vbmdvb3NlLlByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTtcbiAgbW9uZ29vc2UuY29ubmVjdChtb25nb2RiKTtcbn1cbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3B1YmxpYycpKVxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUoIHBhdGguam9pbihfX2Rpcm5hbWUgLCcuLi92aWV3cycsJ2luZGV4Lmh0bWwnKSlcbn0pO1xuYXBwLnVzZSgnL2FwaScsIHNlYXJjaEFwaSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "mongodb",
        "process",
        "env",
        "MLAB_URI",
        "mongooseInit",
        "app",
        "Promise",
        "global",
        "connect",
        "use",
        "static",
        "get",
        "req",
        "res",
        "sendFile",
        "join",
        "__dirname"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA,IAAMA,UAAUC,QAAQC,GAAR,CAAYC,QAA5B;;AAEAC,aAAaJ,OAAb;;AAEO,IAAMK,oBAAM,wBAAZ,C,CAAuB;;;AAG9B;AACA,SAASD,YAAT,CAAsBJ,OAAtB,EAA+B;AAC7B,qBAASM,OAAT,GAAmBC,OAAOD,OAA1B;AACA,qBAASE,OAAT,CAAiBR,OAAjB;AACD;AACDK,IAAII,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,QAAf,CAAR;AACAL,IAAIM,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,MAAIC,QAAJ,CAAc,eAAKC,IAAL,CAAUC,SAAV,EAAqB,UAArB,EAAgC,YAAhC,CAAd;AACD,CAFD;AAGAX,IAAII,GAAJ,CAAQ,MAAR",
      "file": "app.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "import express from 'express';\nimport mongoose from 'mongoose';\nimport path from 'path';\n\nimport { searchApi } from './api/search'\n \nconst mongodb = process.env.MLAB_URI;\n\nmongooseInit(mongodb); \n \nexport const app = express(); // Create express app\n \n \n/* Mongoose initialization function */\nfunction mongooseInit(mongodb) {\n  mongoose.Promise = global.Promise;\n  mongoose.connect(mongodb);\n}\napp.use(express.static('public'))\napp.get('/', (req, res) => {\n  res.sendFile( path.join(__dirname ,'../views','index.html'))\n});\napp.use('/api', searchApi);"
      ]
    },
    "mtime": 1509094575238
  },
  "{\"filename\":\"/app/src/api/search.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src/api\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "searchApi"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "searchApi",
              "exported": "searchApi"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/api/search.js",
      "filenameRelative": "/app/src/api/search.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "search.js",
      "sourceFileName": "search.js",
      "sourceRoot": "/app/src/api",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src/api",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "search"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.searchApi = undefined;\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar searchApi = exports.searchApi = _express2.default.Router();\nvar key = process.env.API_KEY;\nvar host = 'api.cognitive.microsoft.com';\nvar path = '/bing/v7.0/images/search';\nvar https = require('https');\nvar body = '';\n\nsearchApi.get('/imagesearch/:query', function (req, res) {\n    var query = req.params.query;\n    var request_params = {\n        method: 'GET',\n        hostname: host,\n        path: path + '?q=' + encodeURIComponent(query),\n        headers: {\n            'Ocp-Apim-Subscription-Key': key\n        }\n    };\n\n    var request = https.request(request_params, response_handler);\n    res.redirect(request);\n});\nvar response_handler = function response_handler(response) {\n    response.on('data', function (d) {\n        body += d;\n    });\n    response.on('end', function () {\n        console.log('\\nRelevant Headers:\\n');\n        for (var header in response.headers) {\n            // header keys are lower-cased by Node.js\n            if (header.startsWith(\"bingapis-\") || header.startsWith(\"x-msedge-\")) body = JSON.stringify(JSON.parse(body), null, '  ');\n        }\n    });\n    response.on('error', function (e) {\n        console.log('Error: ' + e.message);\n    });\n};\nvar bing_web_search = function bing_web_search(search) {\n    console.log('Searching the Web for: ' + search);\n    var request_params = {\n        method: 'GET',\n        hostname: host,\n        path: path + '?q=' + encodeURIComponent(search),\n        headers: {\n            'Ocp-Apim-Subscription-Key': key\n        }\n    };\n\n    var req = https.request(request_params, response_handler);\n    req.end();\n};\nsearchApi.get('/api/latest/imagesearch', function (req, res) {});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlYXJjaC5qcyJdLCJuYW1lcyI6WyJzZWFyY2hBcGkiLCJSb3V0ZXIiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiQVBJX0tFWSIsImhvc3QiLCJwYXRoIiwiaHR0cHMiLCJyZXF1aXJlIiwiYm9keSIsImdldCIsInJlcSIsInJlcyIsInF1ZXJ5IiwicGFyYW1zIiwicmVxdWVzdF9wYXJhbXMiLCJtZXRob2QiLCJob3N0bmFtZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImhlYWRlcnMiLCJyZXF1ZXN0IiwicmVzcG9uc2VfaGFuZGxlciIsInJlZGlyZWN0IiwicmVzcG9uc2UiLCJvbiIsImQiLCJjb25zb2xlIiwibG9nIiwiaGVhZGVyIiwic3RhcnRzV2l0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImUiLCJtZXNzYWdlIiwiYmluZ193ZWJfc2VhcmNoIiwic2VhcmNoIiwiZW5kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7OztBQUVPLElBQU1BLGdDQUFXLGtCQUFRQyxNQUFSLEVBQWpCO0FBQ1AsSUFBSUMsTUFBS0MsUUFBUUMsR0FBUixDQUFZQyxPQUFyQjtBQUNBLElBQUlDLE9BQU8sNkJBQVg7QUFDQSxJQUFJQyxPQUFPLDBCQUFYO0FBQ0EsSUFBSUMsUUFBUUMsUUFBUSxPQUFSLENBQVo7QUFDQSxJQUFJQyxPQUFPLEVBQVg7O0FBR0FWLFVBQVVXLEdBQVYsQ0FBYyxxQkFBZCxFQUFvQyxVQUFDQyxHQUFELEVBQUtDLEdBQUwsRUFBVztBQUM3QyxRQUFJQyxRQUFNRixJQUFJRyxNQUFKLENBQVdELEtBQXJCO0FBQ0EsUUFBSUUsaUJBQWlCO0FBQ2ZDLGdCQUFTLEtBRE07QUFFZkMsa0JBQVdaLElBRkk7QUFHZkMsY0FBT0EsT0FBTyxLQUFQLEdBQWVZLG1CQUFtQkwsS0FBbkIsQ0FIUDtBQUlmTSxpQkFBVTtBQUNOLHlDQUE4QmxCO0FBRHhCO0FBSkssS0FBckI7O0FBU0UsUUFBSW1CLFVBQVNiLE1BQU1hLE9BQU4sQ0FBY0wsY0FBZCxFQUE4Qk0sZ0JBQTlCLENBQWI7QUFDRVQsUUFBSVUsUUFBSixDQUFhRixPQUFiO0FBQ0gsQ0FiSDtBQWNBLElBQUlDLG1CQUFtQixTQUFuQkEsZ0JBQW1CLENBQVVFLFFBQVYsRUFBb0I7QUFDdkNBLGFBQVNDLEVBQVQsQ0FBWSxNQUFaLEVBQW9CLFVBQVVDLENBQVYsRUFBYTtBQUM3QmhCLGdCQUFRZ0IsQ0FBUjtBQUNILEtBRkQ7QUFHQUYsYUFBU0MsRUFBVCxDQUFZLEtBQVosRUFBbUIsWUFBWTtBQUMzQkUsZ0JBQVFDLEdBQVIsQ0FBWSx1QkFBWjtBQUNBLGFBQUssSUFBSUMsTUFBVCxJQUFtQkwsU0FBU0osT0FBNUI7QUFDSTtBQUNBLGdCQUFJUyxPQUFPQyxVQUFQLENBQWtCLFdBQWxCLEtBQWtDRCxPQUFPQyxVQUFQLENBQWtCLFdBQWxCLENBQXRDLEVBQ0hwQixPQUFPcUIsS0FBS0MsU0FBTCxDQUFlRCxLQUFLRSxLQUFMLENBQVd2QixJQUFYLENBQWYsRUFBaUMsSUFBakMsRUFBdUMsSUFBdkMsQ0FBUDtBQUhEO0FBSVAsS0FORztBQU9BYyxhQUFTQyxFQUFULENBQVksT0FBWixFQUFxQixVQUFVUyxDQUFWLEVBQWE7QUFDOUJQLGdCQUFRQyxHQUFSLENBQVksWUFBWU0sRUFBRUMsT0FBMUI7QUFDSCxLQUZEO0FBR0gsQ0FkRDtBQWVBLElBQUlDLGtCQUFrQixTQUFsQkEsZUFBa0IsQ0FBVUMsTUFBVixFQUFrQjtBQUN0Q1YsWUFBUUMsR0FBUixDQUFZLDRCQUE0QlMsTUFBeEM7QUFDQSxRQUFJckIsaUJBQWlCO0FBQ2ZDLGdCQUFTLEtBRE07QUFFZkMsa0JBQVdaLElBRkk7QUFHZkMsY0FBT0EsT0FBTyxLQUFQLEdBQWVZLG1CQUFtQmtCLE1BQW5CLENBSFA7QUFJZmpCLGlCQUFVO0FBQ04seUNBQThCbEI7QUFEeEI7QUFKSyxLQUFyQjs7QUFTRSxRQUFJVSxNQUFNSixNQUFNYSxPQUFOLENBQWNMLGNBQWQsRUFBOEJNLGdCQUE5QixDQUFWO0FBQ0FWLFFBQUkwQixHQUFKO0FBQ0gsQ0FiRDtBQWNBdEMsVUFBVVcsR0FBVixDQUFjLHlCQUFkLEVBQXdDLFVBQUNDLEdBQUQsRUFBS0MsR0FBTCxFQUFXLENBRWxELENBRkQiLCJmaWxlIjoic2VhcmNoLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc3JjL2FwaSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuXG5leHBvcnQgY29uc3Qgc2VhcmNoQXBpPSBleHByZXNzLlJvdXRlcigpO1xubGV0IGtleT0gcHJvY2Vzcy5lbnYuQVBJX0tFWTtcbmxldCBob3N0ID0gJ2FwaS5jb2duaXRpdmUubWljcm9zb2Z0LmNvbSc7XG5sZXQgcGF0aCA9ICcvYmluZy92Ny4wL2ltYWdlcy9zZWFyY2gnO1xubGV0IGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKTtcbmxldCBib2R5ID0gJyc7XG5cblxuc2VhcmNoQXBpLmdldCgnL2ltYWdlc2VhcmNoLzpxdWVyeScsKHJlcSxyZXMpPT57XG4gIGxldCBxdWVyeT1yZXEucGFyYW1zLnF1ZXJ5O1xuICBsZXQgcmVxdWVzdF9wYXJhbXMgPSB7XG4gICAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgICBob3N0bmFtZSA6IGhvc3QsXG4gICAgICAgIHBhdGggOiBwYXRoICsgJz9xPScgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpLFxuICAgICAgICBoZWFkZXJzIDoge1xuICAgICAgICAgICAgJ09jcC1BcGltLVN1YnNjcmlwdGlvbi1LZXknIDoga2V5LFxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGxldCByZXF1ZXN0PSBodHRwcy5yZXF1ZXN0KHJlcXVlc3RfcGFyYW1zLCByZXNwb25zZV9oYW5kbGVyKTtcbiAgICAgIHJlcy5yZWRpcmVjdChyZXF1ZXN0KTsgXG4gIH0pO1xubGV0IHJlc3BvbnNlX2hhbmRsZXIgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICByZXNwb25zZS5vbignZGF0YScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIGJvZHkgKz0gZDtcbiAgICB9KTtcbiAgICByZXNwb25zZS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnXFxuUmVsZXZhbnQgSGVhZGVyczpcXG4nKTtcbiAgICAgICAgZm9yICh2YXIgaGVhZGVyIGluIHJlc3BvbnNlLmhlYWRlcnMpXG4gICAgICAgICAgICAvLyBoZWFkZXIga2V5cyBhcmUgbG93ZXItY2FzZWQgYnkgTm9kZS5qc1xuICAgICAgICAgICAgaWYgKGhlYWRlci5zdGFydHNXaXRoKFwiYmluZ2FwaXMtXCIpIHx8IGhlYWRlci5zdGFydHNXaXRoKFwieC1tc2VkZ2UtXCIpKVxuICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UoYm9keSksIG51bGwsICcgICcpO1xufSk7XG4gICAgcmVzcG9uc2Uub24oJ2Vycm9yJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnICsgZS5tZXNzYWdlKTtcbiAgICB9KTtcbn07XG5sZXQgYmluZ193ZWJfc2VhcmNoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuICBjb25zb2xlLmxvZygnU2VhcmNoaW5nIHRoZSBXZWIgZm9yOiAnICsgc2VhcmNoKTtcbiAgbGV0IHJlcXVlc3RfcGFyYW1zID0ge1xuICAgICAgICBtZXRob2QgOiAnR0VUJyxcbiAgICAgICAgaG9zdG5hbWUgOiBob3N0LFxuICAgICAgICBwYXRoIDogcGF0aCArICc/cT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaCksXG4gICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAnT2NwLUFwaW0tU3Vic2NyaXB0aW9uLUtleScgOiBrZXksXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IHJlcSA9IGh0dHBzLnJlcXVlc3QocmVxdWVzdF9wYXJhbXMsIHJlc3BvbnNlX2hhbmRsZXIpO1xuICAgIHJlcS5lbmQoKTtcbn1cbnNlYXJjaEFwaS5nZXQoJy9hcGkvbGF0ZXN0L2ltYWdlc2VhcmNoJywocmVxLHJlcyk9PntcbiAgXG59KTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "search.js"
      ],
      "names": [
        "searchApi",
        "Router",
        "key",
        "process",
        "env",
        "API_KEY",
        "host",
        "path",
        "https",
        "require",
        "body",
        "get",
        "req",
        "res",
        "query",
        "params",
        "request_params",
        "method",
        "hostname",
        "encodeURIComponent",
        "headers",
        "request",
        "response_handler",
        "redirect",
        "response",
        "on",
        "d",
        "console",
        "log",
        "header",
        "startsWith",
        "JSON",
        "stringify",
        "parse",
        "e",
        "message",
        "bing_web_search",
        "search",
        "end"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAEO,IAAMA,gCAAW,kBAAQC,MAAR,EAAjB;AACP,IAAIC,MAAKC,QAAQC,GAAR,CAAYC,OAArB;AACA,IAAIC,OAAO,6BAAX;AACA,IAAIC,OAAO,0BAAX;AACA,IAAIC,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,OAAO,EAAX;;AAGAV,UAAUW,GAAV,CAAc,qBAAd,EAAoC,UAACC,GAAD,EAAKC,GAAL,EAAW;AAC7C,QAAIC,QAAMF,IAAIG,MAAJ,CAAWD,KAArB;AACA,QAAIE,iBAAiB;AACfC,gBAAS,KADM;AAEfC,kBAAWZ,IAFI;AAGfC,cAAOA,OAAO,KAAP,GAAeY,mBAAmBL,KAAnB,CAHP;AAIfM,iBAAU;AACN,yCAA8BlB;AADxB;AAJK,KAArB;;AASE,QAAImB,UAASb,MAAMa,OAAN,CAAcL,cAAd,EAA8BM,gBAA9B,CAAb;AACET,QAAIU,QAAJ,CAAaF,OAAb;AACH,CAbH;AAcA,IAAIC,mBAAmB,SAAnBA,gBAAmB,CAAUE,QAAV,EAAoB;AACvCA,aAASC,EAAT,CAAY,MAAZ,EAAoB,UAAUC,CAAV,EAAa;AAC7BhB,gBAAQgB,CAAR;AACH,KAFD;AAGAF,aAASC,EAAT,CAAY,KAAZ,EAAmB,YAAY;AAC3BE,gBAAQC,GAAR,CAAY,uBAAZ;AACA,aAAK,IAAIC,MAAT,IAAmBL,SAASJ,OAA5B;AACI;AACA,gBAAIS,OAAOC,UAAP,CAAkB,WAAlB,KAAkCD,OAAOC,UAAP,CAAkB,WAAlB,CAAtC,EACHpB,OAAOqB,KAAKC,SAAL,CAAeD,KAAKE,KAAL,CAAWvB,IAAX,CAAf,EAAiC,IAAjC,EAAuC,IAAvC,CAAP;AAHD;AAIP,KANG;AAOAc,aAASC,EAAT,CAAY,OAAZ,EAAqB,UAAUS,CAAV,EAAa;AAC9BP,gBAAQC,GAAR,CAAY,YAAYM,EAAEC,OAA1B;AACH,KAFD;AAGH,CAdD;AAeA,IAAIC,kBAAkB,SAAlBA,eAAkB,CAAUC,MAAV,EAAkB;AACtCV,YAAQC,GAAR,CAAY,4BAA4BS,MAAxC;AACA,QAAIrB,iBAAiB;AACfC,gBAAS,KADM;AAEfC,kBAAWZ,IAFI;AAGfC,cAAOA,OAAO,KAAP,GAAeY,mBAAmBkB,MAAnB,CAHP;AAIfjB,iBAAU;AACN,yCAA8BlB;AADxB;AAJK,KAArB;;AASE,QAAIU,MAAMJ,MAAMa,OAAN,CAAcL,cAAd,EAA8BM,gBAA9B,CAAV;AACAV,QAAI0B,GAAJ;AACH,CAbD;AAcAtC,UAAUW,GAAV,CAAc,yBAAd,EAAwC,UAACC,GAAD,EAAKC,GAAL,EAAW,CAElD,CAFD",
      "file": "search.js",
      "sourceRoot": "/app/src/api",
      "sourcesContent": [
        "import express from 'express';\n\nexport const searchApi= express.Router();\nlet key= process.env.API_KEY;\nlet host = 'api.cognitive.microsoft.com';\nlet path = '/bing/v7.0/images/search';\nlet https = require('https');\nlet body = '';\n\n\nsearchApi.get('/imagesearch/:query',(req,res)=>{\n  let query=req.params.query;\n  let request_params = {\n        method : 'GET',\n        hostname : host,\n        path : path + '?q=' + encodeURIComponent(query),\n        headers : {\n            'Ocp-Apim-Subscription-Key' : key,\n        }\n    };\n\n    let request= https.request(request_params, response_handler);\n      res.redirect(request); \n  });\nlet response_handler = function (response) {\n    response.on('data', function (d) {\n        body += d;\n    });\n    response.on('end', function () {\n        console.log('\\nRelevant Headers:\\n');\n        for (var header in response.headers)\n            // header keys are lower-cased by Node.js\n            if (header.startsWith(\"bingapis-\") || header.startsWith(\"x-msedge-\"))\n         body = JSON.stringify(JSON.parse(body), null, '  ');\n});\n    response.on('error', function (e) {\n        console.log('Error: ' + e.message);\n    });\n};\nlet bing_web_search = function (search) {\n  console.log('Searching the Web for: ' + search);\n  let request_params = {\n        method : 'GET',\n        hostname : host,\n        path : path + '?q=' + encodeURIComponent(search),\n        headers : {\n            'Ocp-Apim-Subscription-Key' : key,\n        }\n    };\n\n    let req = https.request(request_params, response_handler);\n    req.end();\n}\nsearchApi.get('/api/latest/imagesearch',(req,res)=>{\n  \n});"
      ]
    },
    "mtime": 1509099714530
  }
}